#! /bin/sh

# $Id$

/bin/echo "Starting vixie-cron..."
/usr/sbin/cron

/bin/echo "Bringing up loopback interface..."
/sbin/ifconfig lo 127.0.0.1
/sbin/route add -net 127.0.0.0 netmask 255.0.0.0 lo

if [ -x /etc/rc.d/rc.network ]; then
    /etc/rc.d/rc.network start
fi

if [ -s /etc/ntp_server ]; then
    /bin/echo "Setting system date/time via NTP..."
    /usr/sbin/ntpd -n -q -N -p `/bin/cat /etc/ntp_server`
fi

if [ -x /etc/rc.d/rc.kdump ]; then
    /bin/echo "Loading crash dump kernel (kexec)..."
    /etc/rc.d/rc.kdump
fi

if [ -x /etc/rc.d/rc.sshd ]; then
    /bin/echo "Starting sshd..."
    /etc/rc.d/rc.sshd
fi

if [ -x /etc/rc.d/rc.lvm2 ]; then
    /bin/echo "Configuring the LVM subsystem..."
    /etc/rc.d/rc.lvm2
fi

if [ -x /etc/rc.d/rc.drbd ]; then
    /etc/rc.d/rc.drbd start
fi

if [ -x /etc/rc.d/rc.corosync ]; then
    /etc/rc.d/rc.corosync start
fi

if [ -x /etc/rc.d/rc.pacemaker ]; then
    /etc/rc.d/rc.pacemaker start
fi

if [ -f /etc/pre-scst_xtra_conf ]; then
    /bin/echo "Pre-SCST user config. file found; running..."
    /bin/sh /etc/pre-scst_xtra_conf
fi

if [ -x /etc/rc.d/rc.scst ]; then
    /bin/echo "Loading and configuring SCST..."
    /etc/rc.d/rc.scst
fi

if [ -f /etc/post-scst_xtra_conf ]; then
    /bin/echo "Post-SCST user config. file found; running..."
    /bin/sh /etc/post-scst_xtra_conf
fi

if [ -x /etc/rc.d/rc.local ]; then
    /etc/rc.d/rc.local
fi
