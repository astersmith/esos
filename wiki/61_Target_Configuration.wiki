#summary Enabling and configuring SCST targets.

=== Enabling/Disabling Targets ===
Enabling your target(s) is the final step to allow I/O (make target/volume visible to remote host). Open the Enable/Disable Target dialog in the TUI (Targets -> Enable/Disable Target). You can then choose the desired target and hit ENTER. Next you'll be shown the target's current state (enabled or disabled) and you can TAB to a radio widget to enable/disable the target. Hit 'OK' to make your selection.

<br>

=== Fibre Channel Targets ===
Fibre Channel targets in ESOS are considered "hardware-based" targets. The FC HBA is put into "target" mode and will be automatically available to SCST (ESOS). No additional configuration is required. At the time of writing this, only QLogic Fibre Channel Host Bus Adapters (HBAs) are built-in (default). If you happen to have Emulex SLI-4 Fibre Channel HBAs, you can build ESOS with the "--with-ocs_sdk" option (requires the Emulex OCS SDK) to support these FC HBAs as hardware target interfaces.

For Fibre Channel targets, you can use the Issue LIP function in the TUI (Targets -> Issue LIP) to issue a LIP (Loop Initialization Primitive) on all Fibre Channel HBAs.

<br>

=== InfiniBand Targets ===
InfiniBand (IB) targets are also considered "hardware-based" targets in ESOS; these will be available to SCST. Configuring the IB fabric (eg, subnet manager) is outside the scope of this documentation. See the [03_Supported_Hardware] page for supported InfiniBand Host Channel Adapters (HCAs).

<br>

=== iSCSI Targets ===
iSCSI targets in ESOS are considered to be "software-based" or dynamic targets. These targets need to be created initially and have no direct relationship to underlying hardware (similar to software iSCSI initiators).

You can use the ESOS TUI to create iSCSI targets (Targets -> Add iSCSI Target). Creating a basic iSCSI target is very simple: Choose an IQN for the new target name, and hit the 'OK' button. ESOS generates an appropriate IQN automatically that you may use if you choose or you can change it to your liking.

Removing iSCSI targets is just as simple as creating them in the TUI (Targets -> Remove iSCSI Target). Choose the target you'd like to delete and hit ENTER (you'll be prompted for confirmation). _This would definitely interrupt any I/O to/from the target!_

<br>

=== Hardware FCoE Targets (QLogic/Emulex/Chelsio FCoE CNA) ===
ESOS includes built-in support for QLogic FCoE CNAs via the QLogic/SCST qla2x00t target driver.

Emulex FCoE CNAs (SLI-4) are supported via a build-time option (using "--with-ocs_sdk" with the autoconf script). This requires the Emulex OCS SDK (available from Emulex via registration).

Chelsio FCoE CNAs are also supported using the "--with-uwire" option and requires the Chelsio Uwire driver package available from Chelsio's web site.

All three of these driver types require no additional configuration on the ESOS side of things. They should appear as hardware target interfaces just like Fibre Channel and InfiniBand. You'll utilize the host/security groups for initiators like normal, and zone on your FCoE capable switches.

<br>

=== Software FCoE Targets (via DCB/DCBX capable NIC) ===
DCB/DCBX capable NICs are supported via the "fcst" software FCoE target driver. Follow the configuration steps below. In addition, you'll need FCoE capable switches and other FC/FCoE supporting hardware/software. Simply having Ethernet switches that support DCB/DCBX and other FCoE technologies is not enough... FC name server, etc. are still required and not all "FCoE" switches/devices provide this -- check with your vendor.

To configure the local interfaces on ESOS, you will first need to create the `/etc/fcoe/cfg-<ifname>` file (replacing `<ifname>` with your actual interface name). A default/example configuration file is included, simply copy this for each interface you'd like to setup; in this example our interface is 'eth2':
{{{
cp /etc/fcoe/cfg-ethx /etc/fcoe/cfg-eth2
}}}

You can then edit this file to your liking (see `man 8 fcoemon` for more information).

Next, restart the SCST service, which includes user-land daemons for FCoE (fcoemon, lldpad):
{{{
/etc/rc.d/rc.scst stop && /etc/rc.d/rc.scst start
}}}

Now you can configure the interface for DCB (Data Center Bridging):
{{{
dcbtool sc eth2 dcb on
dcbtool sc eth2 pfc e:1
dcbtool sc eth2 app:fcoe e:1
}}}

Check the status and list of visible initiators with this command:
{{{
fcc.sh
}}}

The FCoE target should now be available in SCST (fcst); it should be listed in the adapters information label in the main TUI screen and available under the Targets menu. You can now use this FCoE target the same as any other SCST target (creating host groups, adding initiators, etc.).

<br>

=== Target Information ===
Some basic target information is accessible via the TUI using the Target Information dialog (Targets -> Target Information). Choose a target when prompted and hit the ENTER key to make a selection. Target information is display in a pop-up dialog (state, CPU mask, driver, etc.). Press ENTER to close the dialog.

<br>

=== What's Next ===
At this point you've provisioned your storage and the remote hosts (initiators) should now have access to it. A rescan from initiator will likely be necessary to discover any new targets.

If you're having any trouble, please read the [04_ESOS_Support] wiki page for basic help and troubleshooting tips. Use the [http://groups.google.com/group/esos-users esos-users] Google Group if you are still not finding answers.